<div class="container">
    <div class="row">
        <div class="col s12">
            <h5 class="header">New Player form</h5>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="alert alert-success" role="alert" id="user-creation-alert" style="display:none">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            <form id="new-player-form" class="col s12">
                <div class="input-field">
                    <input placeholder="" id="player-name" type="text" class="validate">
                    <label for="player-name">Player Name</label>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="phone-number" type="text" class="validate">
                        <label for="phone-number">Phone Number</label>
                    </div>
                </div>

                <div class="row">
                    <div class="input-field col s12">
                        <input id="email" type="email" class="validate">
                        <label for="email">Email</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="password" type="password" class="validate">
                        <label for="password">Password</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <input id="usta-id" type="number" class="validate">
                        <label for="usta-id">USTA Number</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="utr-rating" type="number" class="validate">
                        <label for="utr-rating">UTR Rating</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <select id="level">
                            <option value="" disabled selected>Choose your option</option>
                            <option value="1">Beginner</option>
                            <option value="2">Intermediate</option>
                            <option value="3">Advanced</option>
                        </select>
                        <label>Player Level</label>
                    </div>

                </div>
                <button class="btn waves-effect waves-light btn-small" id="new-player">Submit
                    <i class="material-icons right">send</i>
                </button>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">

    $(document).on("click", function () {
        $(".user-logout").removeClass("hide");

        $("#new-player-form").on("submit", function (event) {
            event.preventDefault();
            const name = $("#player-name").val();
            const email = $("#email").val();
            const phone = $("#phone-number").val();
            const id = parseInt($("#usta-id").val());
            const rating = parseInt($("#utr-rating").val());

            const levelInput = parseInt($("#level").val());

            if (levelInput == 1) {
                level = "beginner";

            }
            else if (levelInput == 2) {
                level = "intermediate";
            }
            else {
                level = "advanced";
            }


            const password = $("#password").val();

            $.ajax({
                url: `/api/player`,
                method: "POST",
                data: {
                    fullName: name,
                    email: email,
                    phone: phone,
                    ustaId: id,
                    utrRating: rating,
                    level: level,
                    password: password                    
                }
            }).then(function () {
                window.location.replace(`/coach/1`);
            });
        });
    });


</script>